include_guard(GLOBAL)

message(STATUS "Using ${DEPENDENCY_VERSION} of JPEG Turbo library.")

ExternalProject_Add("${DEPENDENCY}"
	${EP_BASE_LOCATION_ARGS}
	GIT_REPOSITORY "${GITHUB_PREFIX}libjpeg-turbo/libjpeg-turbo.git"
	GIT_TAG "${DEPENDENCY_VERSION}"
	${EP_GIT_ARGS}
	${EP_CMAKE_DEFAULT_GENERATOR}
	CMAKE_ARGS
		${EP_CMAKE_DEFAULT_CONFIGURE_ARGS}
	CMAKE_CACHE_ARGS
		${EP_CMAKE_DEFAULT_CONFIGURE_CACHE_ARGS}
		"-DCMAKE_ASM_NASM_COMPILER:PATH=${CMAKE_ASM_NASM_COMPILER}"
		"-DENABLE_SHARED:BOOL=${MSVCRT_IS_SHARED}"
		"-DREQUIRE_SIMD:BOOL=TRUE"
		"-DWITH_JPEG7:BOOL=TRUE"
		"-DWITH_JPEG8:BOOL=TRUE"
	CONFIGURE_HANDLED_BY_BUILD TRUE
	${EP_WITH_BUILD_EXTRA_ARGS}
	# DEPENDS
	# 	"yasm"
	EXCLUDE_FROM_ALL TRUE
)

set(DEPENDENCY_ENABLED TRUE)
